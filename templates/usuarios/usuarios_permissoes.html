{% extends "base.html" %}
{% block content %}

<h2 class="mb-3">
    PermissÃµes de <strong>{{ usuario.nome }}</strong>
</h2>

<p class="mb-3">
    Perfil:
    {% if usuario.perfil == 1 %}
        <span class="badge bg-dark">Admin</span>
    {% else %}
        <span class="badge bg-secondary">UsuÃ¡rio</span>
    {% endif %}
</p>

<form method="POST">
    <div class="table-responsive">
        <table class="table table-bordered align-middle text-center">
            <thead class="table-dark">
                <tr>
                    <th class="text-start">Tela</th>
                    <th>Criar</th>
                    <th>Editar</th>
                    <th>Excluir</th>
                </tr>
            </thead>

            <tbody>
                {% for tela in telas %}
                <tr>
                    <td class="text-start fw-semibold">
                        {{ tela.nome }}
                    </td>

                    {% for acao in ["criar", "editar", "excluir"] %}
                    <td>
                        <input
                            type="checkbox"
                            class="form-check-input"
                            name="permissoes_{{ tela.id }}_{{ acao }}"
                            {% if permissoes.get(tela.id, {}).get(acao, False) %}
                                checked
                            {% endif %}
                        >
                    </td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="mt-3 d-flex gap-2">
        <button type="submit" class="btn btn-success">
            ðŸ’¾ Salvar PermissÃµes
        </button>

        <a href="{{ url_for('usuarios.usuarios_listar') }}" class="btn btn-secondary">
            Cancelar
        </a>
    </div>
</form>

{% endblock %}